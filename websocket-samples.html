<!DOCTYPE html>
<html>
	<head>
		<title></title>
		<meta charset="utf-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
		<script type="text/javascript" src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
		<script type="text/javascript" src="https://raw.github.com/alexei/sprintf.js/master/src/sprintf.min.js"></script>
	</head>
	<body>
		<pre id="data"></pre>

		<script>
			$(function(){
				function start () {
					var ws = new WebSocket("ws://localhost:51234");
					ws.onopen = function() {
						console.log('ws.onopen');
					};

					ws.onclose = function() {
						console.log('ws.onclose');
						setTimeout(start, 1000);
					};

					ws.onmessage = function (evt) {
						console.log('ws.onmessage', data);
						var data = JSON.parse(evt.data);
						$('#data').text(JSON.stringify(data, null, "    "));
					};
				}

				start();
			});
		</script>
	</body>
</html>
